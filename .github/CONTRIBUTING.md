# Contributing to Dragula2

Hey there! Glad you want to chime in. Here's what you need to know.

## Issues report

If you need to open an issue, please [choose the type of issue][link_issue_create] to open.

We have 4 types of issues to use:

- [bug report][link_issue_create_bug]
- [feature request][link_issue_create_feature_request]
- [support question][link_issue_create_support_question]
- [documentation][link_issue_create_documentation]

### Reporting Bugs

Bug reports are tricky. However, before submitting it, please:

- Check the project [documentation available online][link_documentation_website]

Then, if it appears that it's a real bug, you may report it using GitHub by following these 3 points:

- Check if [the bug is not already reported][link_issue]!
- A clear title to resume the issue
- A description of the workflow needed to reproduce the bug
- If possible, provide a demo where the bug is isolated and turned into its smallest possible representation. That would
  help a lot!

Thanks for reporting bugs, we'd be lost without you and if you want to start working on a fix, we'll be forever
grateful!

### Feature Requests

We're still considering feature requests. Note that we might not implement the feature you want, or exactly how you want
it. The goal here is to keep making `dragula2` awesome while not making it too bloated.

We also dislike overly specific features and favor more abstract ones you the consumer can build other features upon.

### Support Requests

If you have a question, make sure it wasn't [already answered][link_issue_question_label].

> Our goal is to provide answers to the most frequently asked questions somewhere in the documentation.

## Development

Development flows are based on `pnpm` scripts.

### Build

To compile a standalone browserify module, use the following command. A minified version will also be produced. The
compiled bundles are placed inside `dist`. Since **these are autogenerated**, please don't include them in your pull
requests.

```shell
pnpm build
```

You can also run the build continuously, _to facilitate development_, with this command.

```shell
pnpm start
```

### Test

Now we have 2 different technologies in place for testing, **Jest** & **Tape**. This will be the case while waiting to
stabilize the second edition of Dragula.

In the near future, we want to keep only one technology and it will be **Jest**, because the technology is better
maintained and with a larger community.

#### Jest - The new format

To run tests a single time, simply run the following command.

```shell
pnpm test
```

Run the command below to execute all tests with a reload whenever your test files change, making tests a breeze!

```shell
pnpm test:watch
```

This is used in CI testing.

```shell
pnpm test:ci
```

#### Tape - The historical format

To run tests a single time, simply run the following command. This is used in CI testing.

```shell
pnpm test:old
```

Run the command below to execute all tests with a reload whenever your test files change, making tests a breeze!

```shell
pnpm test:old:watch
```

## Pull Requests

### Creation of commits

To make your life easier, a set of tools is implemented during the installation of the project for development.

**During your commit process**, the [husky library][link_husky_project] will automatically launch certain commands on 2
of the git events:

- commit-msg
  - launch [commitlint][link_commitlint_project]
- pre-commit
  - launch [eslint][link_eslint_project] on `js` files
  - launch [prettier][link_prettier_project] on `css`, `html`, `json` and `md` files

### Writing a Pull Request

First of all, you must decide on what branch your changes will be based depending of the nature of the change.

- stable: regular bugfixes are integrated in this version
- old-stable: security fixes are integrated in this version, regular bugfixes are not backported in it
- development (main branch): new features target this branch

### Sending a Pull Request

When you send a PR, just make sure that:

- You add valid test cases.
- Tests are green.
- You make the PR on the same branch you based your changes on. If you see commits that you did not make in your PR,
  you're doing it wrong.
- Also don't forget to add a comment when you update a PR with a ping @toofff.

The commit messages must follow the [Conventional Commits specification](https://www.conventionalcommits.org/).

The following `scope` are allowed:

- `core`: Dragula2 source code (`@dragula2/core` package)
- `github`: management of the github account and its tools
- `monorepo`: monorepository management
- `tools`: the external tools put in place to improve the development experience
- `website`: presentation and demo website

The following `types` are allowed:

- `feat`: a new feature
- `fix`: a bug fix
- `docs`: documentation only changes
- `style`: changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)
- `refactor`: a code change that neither fixes a bug nor adds a feature
- `perf`: a code change that improves performance
- `test`: adding missing tests or correcting existing tests
- `build`: changes that affect the build system or external dependencies (example scopes: gulp, broccoli, npm)
- `ci`: changes to our CI configuration files and scripts (example scopes: Github, Circle, BrowserStack, SauceLabs)
- `chore`: other changes that don't modify src or test files
- `revert`: reverts a previous commit

[link_documentation_website]: https://toofff.github.io/dragula2
[link_commitlint_project]: https://commitlint.js.org/#/
[link_husky_project]: https://typicode.github.io/husky/#/
[link_eslint_project]: https://eslint.org/
[link_prettier_project]: https://prettier.io/
[link_issue]: https://github.com/toofff/dragula2/issues
[link_issue_create]: https://github.com/toofff/dragula2/issues/new/choose
[link_issue_create_bug]:
  https://github.com/toofff/dragula2/issues/new?assignees=&labels=bug%2CStatus%3A+Needs+review&template=01_bug_report.yaml
[link_issue_create_feature_request]:
  https://github.com/toofff/dragula2/issues/new?assignees=&labels=enhancement%2CStatus%3A+Needs+review&template=02_feature_request.yaml
[link_issue_create_support_question]:
  https://github.com/toofff/dragula2/issues/new?assignees=&labels=question%2CStatus%3A+Needs+review&template=03_support_question.yaml
[link_issue_create_documentation]:
  https://github.com/toofff/dragula2/issues/new?assignees=&labels=documentation%2CStatus%3A+Needs+review&template=04_documentation.yaml
[link_issue_question_label]: https://github.com/toofff/dragula2/issues?q=label%3Aquestion
